"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[482],{5482:(R,d,s)=>{s.r(d),s.d(d,{CategoriesModule:()=>$});var p=s(8583),g=s(3679),m=s(1494),c=s(2789),e=s(7716),x=s(1841),T=s(9517),v=s(2082),u=s(7001),h=s(1095),_=s(6627),f=s(9692),C=s(4885);const y=["content"],A=["Paginator"];function b(o,l){1&o&&(e.TgZ(0,"div",23),e._UZ(1,"mat-spinner",24),e.qZA())}function k(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"th",36),e.TgZ(1,"input",37),e.NdJ("click",function(i){return e.CHM(t),e.oxw(2).checkAllDeleteItems(i)}),e.qZA(),e.qZA()}}function D(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"td",38),e.TgZ(1,"div",39),e.TgZ(2,"input",40),e.NdJ("click",function(){const i=e.CHM(t),n=i.$implicit,r=i.index;return e.oxw(2).getDeleteItems(n,r)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=l.$implicit;e.xp6(2),e.s9C("id",t._id)}}function N(o,l){1&o&&(e.TgZ(0,"th",36),e._uU(1," Name"),e.qZA())}function S(o,l){if(1&o&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.categoryName)}}function I(o,l){1&o&&(e.TgZ(0,"th",36),e._uU(1," Description"),e.qZA())}function q(o,l){if(1&o&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.categoryDescription)}}function B(o,l){1&o&&(e.TgZ(0,"th",41),e._uU(1," Action "),e.qZA())}function U(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"td",42),e.TgZ(1,"button",43),e.NdJ("click",function(){const i=e.CHM(t),n=i.$implicit,r=i.index;return e.oxw(2).openUpdateModal(n,r)}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA(),e.TgZ(4,"button",44),e.NdJ("click",function(){const i=e.CHM(t),n=i.$implicit,r=i.index;return e.oxw(2).deleteCategory(n,r)}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA()}}function P(o,l){1&o&&e._UZ(0,"tr",45)}function J(o,l){1&o&&e._UZ(0,"tr",46)}function F(o,l){if(1&o&&(e.TgZ(0,"table",25),e.ynx(1,26),e.YNc(2,k,2,0,"th",27),e.YNc(3,D,3,1,"td",28),e.BQk(),e.ynx(4,29),e.YNc(5,N,2,0,"th",27),e.YNc(6,S,2,1,"td",28),e.BQk(),e.ynx(7,30),e.YNc(8,I,2,0,"th",27),e.YNc(9,q,2,1,"td",28),e.BQk(),e.ynx(10,31),e.YNc(11,B,2,0,"th",32),e.YNc(12,U,7,0,"td",33),e.BQk(),e.YNc(13,P,1,0,"tr",34),e.YNc(14,J,1,0,"tr",35),e.qZA()),2&o){const t=e.oxw();e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumnsOne),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsOne)}}function M(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",47),e.TgZ(1,"h4",48),e._uU(2),e.qZA(),e.TgZ(3,"button",49),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.TgZ(4,"span",50),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",51),e.TgZ(7,"form",52),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().postData()}),e.TgZ(8,"div",7),e.TgZ(9,"div",53),e.TgZ(10,"label",54),e._uU(11," Name"),e.qZA(),e._UZ(12,"input",55),e.qZA(),e.TgZ(13,"div",53),e.TgZ(14,"label",54),e._uU(15," Description"),e.qZA(),e._UZ(16,"input",56),e.qZA(),e.qZA(),e.TgZ(17,"div",57),e.TgZ(18,"button",58),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",59),e.TgZ(21,"button",60),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Save click")}),e._uU(22,"Close"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("",t.selectedCategory?"Update":"Add"," Category"),e.xp6(5),e.Q6J("formGroup",t.categoriesForm),e.xp6(12),e.hij("",t.selectedCategory?"Update":"Add"," Category")}}const Y=function(){return[5,10,20,30,50,100]};let w=(()=>{class o{constructor(t,a,i,n,r){this.http=t,this.modalService=a,this._formBuilder=i,this.categoryService=n,this._snackBar=r,this.dataSource=new c.by,this.loading=!1,this.tablePaging={offset:0,limit:20,previousSize:0},this.setBulkDeleteItems=[],this.displayedColumnsOne=["check","name","description","action"]}ngOnInit(){this.categoriesForm=this._formBuilder.group({categoryName:["",[g.kI.required]],categoryDescription:["",[g.kI.required]]})}ngAfterViewInit(){this.getData()}getData(){this.categoryService.getCategories({params:this.tablePaging}).subscribe(t=>{this.loading=!1,this.categories=t.Categories,console.log("this.users",this.categories),this.categories.length=t.total,this.dataSource=new c.by(this.categories),this.dataSource.paginator=this.Paginator})}getNextData(){this.loading=!0,this.userDataPromise&&this.userDataPromise.unsubscribe(),this.userDataPromise=this.categoryService.getCategories({params:this.tablePaging}).subscribe(t=>{this.loading=!1,console.log(t.Categories),this.categories.length=this.tablePaging.previousSize,this.categories.push(...t.Categories),this.categories.length=t.total,this.dataSource=new c.by(this.categories),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.Paginator})}pageChanged(t){this.tablePaging.limit=t.pageSize,this.tablePaging.offset=t.pageIndex.toString(),this.tablePaging.previousSize=t.pageSize*t.pageIndex,this.getNextData()}applyCategoryFilter(t){console.log("this.tablePaging",this.tablePaging);var a=t.trim().toLowerCase();this.userDataPromise=this.categoryService.filterCategories(a).subscribe(i=>{this.loading=!1,this.categories=i.categories,console.log("this.Products",this.categories),this.categories.length=i.total,this.dataSource=new c.by(this.categories),this.dataSource.paginator=this.Paginator})}openModal(t=null){this.selectedCategory=t,this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title"}).result.then(a=>{},a=>{this.categoriesForm.reset()})}openUpdateModal(t){console.log(t),this.openModal(t._id),this.categoriesForm.patchValue(t)}postData(){if(this.categoriesForm.markAllAsTouched(),this.categoriesForm.invalid)return console.log("this.categoriesForm",this.categoriesForm.value),!1;this.selectedCategory?this.categoryService.updateCategories(this.selectedCategory,this.categoriesForm.value).subscribe(t=>{this.modalService.dismissAll(),this.categoriesForm.reset(),console.log(this.categories.length),this.getNextData()},t=>{console.log(t)}):this.categoryService.addCategories(this.categoriesForm.value).subscribe(t=>{console.log(t),this.modalService.dismissAll(),this.categoriesForm.reset(),console.log(this.categories.length),this.getNextData()},t=>{console.log(t)})}deleteCategory(t){confirm("Are you sure to delete ?")&&this.categoryService.deleteCategories(t).subscribe(a=>{this.getNextData()})}checkAllDeleteItems(t){var a=document.getElementsByClassName("deleteChecks");if(t.target.checked)for(let i=0;i<a.length;i++){let n=a[i];n.checked=!0;let r=n.getAttribute("id");console.log(n),this.setBulkDeleteItems.push(r)}else for(let i=0;i<a.length;i++){let n=a[i];n.checked=!1,console.log(n),this.setBulkDeleteItems=[]}}getDeleteItems(t,a){document.getElementById("deleteAll").checked=!1;var r=document.getElementById(t._id).checked;console.log("index",this.setBulkDeleteItems),r?this.setBulkDeleteItems.push(t._id):this.setBulkDeleteItems.splice(a,1),console.log(this.setBulkDeleteItems)}BulkDelete(){void 0!==typeof this.setBulkDeleteItems&&this.setBulkDeleteItems.length>0?confirm("Are you sure to delete ?")&&this.categoryService.bulkDelete(this.setBulkDeleteItems).subscribe(t=>{console.log("response",t),document.getElementById("deleteAll").checked=!1,this._snackBar.open(t.message,"",{duration:2e3,verticalPosition:"top"}),this.getNextData()},t=>{console.log(t)}):this._snackBar.open("No product selected","",{duration:2e3,verticalPosition:"top"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.eN),e.Y36(T.FF),e.Y36(g.qu),e.Y36(v.G),e.Y36(u.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],viewQuery:function(t,a){if(1&t&&(e.Gf(y,5),e.Gf(m.YE,5),e.Gf(A,5)),2&t){let i;e.iGM(i=e.CRH())&&(a.content=i.first),e.iGM(i=e.CRH())&&(a.sort=i.first),e.iGM(i=e.CRH())&&(a.Paginator=i.first)}},decls:29,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],["mat-raised-button","","color","primary",3,"click"],[1,"me-2"],[1,"row"],[1,"mat-elevation-z8","shadow-sm","p-3","w-100","bg-white"],[1,"d-flex","px-3","py-4"],[1,"col-6"],[1,"form-group"],[2,"cursor","pointer",3,"click"],[1,"form-group","d-flex"],["mat-raised-button","","color","warn",1,"ms-auto","me-2",3,"click"],["type","text","placeholder","Search",1,"form-control","bg-light","sortInput","rounded-pill",2,"max-width","268px",3,"keyup"],["categoryInput",""],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["table",""],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],["Paginator",""],["class","bd-example-modal-lg"],["content",""],[1,"d-flex","justify-content-center"],[1,"progress-spinner"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","action"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["type","checkbox","id","deleteAll","value","",1,"form-check-input",3,"click"],["mat-cell",""],[1,"form-check"],["type","checkbox","value","",1,"form-check-input","deleteChecks",3,"id","click"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"px-4",3,"formGroup","ngSubmit"],[1,"form-group","mb-3","col-12"],["for","",1,"mb-1"],["type","text","id","categoryName","name","categoryName","formControlName","categoryName","placeholder","John doe",1,"form-control"],["type","text","id","categoryDescription","name","categoryDescription","formControlName","categoryDescription","placeholder","John doe",1,"form-control"],[1,"form-group","mb-3"],["type","submit",1,"btn","btn-primary"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return a.openModal()}),e.TgZ(6,"mat-icon",6),e._uU(7,"add"),e.qZA(),e._uU(8," Add Category"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"mat-icon",12),e.NdJ("click",function(){return a.getNextData()}),e._uU(15,"autorenew"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"div",13),e.TgZ(18,"button",14),e.NdJ("click",function(){return a.BulkDelete()}),e._uU(19,"Bulk Delete"),e.qZA(),e.TgZ(20,"input",15,16),e.NdJ("keyup",function(){e.CHM(i);const r=e.MAs(21);return a.applyCategoryFilter(r.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(22,b,2,0,"div",17),e.YNc(23,F,15,3,"ng-template",null,18,e.W1O),e.TgZ(25,"mat-paginator",19,20),e.NdJ("page",function(r){return a.pageChanged(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,M,23,3,"ng-template",21,22,e.W1O),e.qZA()}if(2&t){const i=e.MAs(24);e.xp6(22),e.Q6J("ngIf",a.loading)("ngIfElse",i),e.xp6(3),e.Q6J("pageIndex",0)("pageSize",a.tablePaging.limit)("pageSizeOptions",e.DdM(5,Y))}},directives:[h.lW,_.Hw,p.O5,f.NW,C.$g,c.BZ,m.YE,c.w1,c.fO,c.Dz,c.as,c.nj,c.ge,c.ev,c.XQ,c.Gk,g._Y,g.JL,g.sg,g.Fj,g.JJ,g.u],styles:[".ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545!important}  .mat-simple-snackbar{justify-content:center!important}"]}),o})();var H=s(3423),z=s(171),E=s(8295),O=s(9983),Q=s(8550),G=s(3771),j=s(4466);let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,H.Bz.forChild([{path:"",component:w}]),j.m,c.p0,h.ot,_.Ps,f.TU,m.JX,g.u5,g.UX,z.To,E.lN,O.c,G.T,Q.xD,C.Cq,u.ZX]]}),o})()}}]);