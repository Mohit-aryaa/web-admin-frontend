"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[170],{5601:(E,g,i)=>{i.r(g),i.d(g,{StocklowModule:()=>R});var p=i(8583),c=i(3679),d=i(1494),l=i(2789),t=i(7716),k=i(1841),_=i(9517),Z=i(6137),u=i(6627),h=i(9692),f=i(4885),S=i(1095);const v=["content"],x=["Paginator"];function C(o,a){1&o&&(t.TgZ(0,"div",20),t._UZ(1,"mat-spinner",21),t.qZA())}function T(o,a){1&o&&(t.TgZ(0,"div",22),t._uU(1," No Records Found! "),t.qZA())}function b(o,a){1&o&&(t.TgZ(0,"th",33),t._uU(1," Name"),t.qZA())}function w(o,a){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.productName)}}function A(o,a){1&o&&(t.TgZ(0,"th",33),t._uU(1," Stock"),t.qZA())}function y(o,a){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.stock)}}function N(o,a){1&o&&(t.TgZ(0,"th",35),t._uU(1," Action "),t.qZA())}function D(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"button",37),t.NdJ("click",function(){const s=t.CHM(e),r=s.$implicit,m=s.index;return t.oxw(2).openUpdateModal(r,m)}),t.TgZ(2,"mat-icon",38),t._uU(3,"add"),t.qZA(),t._uU(4," Add Stocks "),t.qZA(),t.qZA()}}function q(o,a){1&o&&t._UZ(0,"tr",39)}function F(o,a){1&o&&t._UZ(0,"tr",40)}function P(o,a){if(1&o&&(t.TgZ(0,"table",23),t.ynx(1,24),t.YNc(2,b,2,0,"th",25),t.YNc(3,w,2,1,"td",26),t.BQk(),t.ynx(4,27),t.YNc(5,A,2,0,"th",25),t.YNc(6,y,2,1,"td",26),t.BQk(),t.ynx(7,28),t.YNc(8,N,2,0,"th",29),t.YNc(9,D,5,0,"td",30),t.BQk(),t.YNc(10,q,1,0,"tr",31),t.YNc(11,F,1,0,"tr",32),t.qZA()),2&o){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumnsOne),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumnsOne)}}function U(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",41),t.TgZ(1,"h4",42),t._uU(2,"Add Stock"),t.qZA(),t.TgZ(3,"button",43),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t.TgZ(4,"span",44),t._uU(5,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",45),t.TgZ(7,"form",46),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().postData()}),t.TgZ(8,"div",5),t.TgZ(9,"div",47),t.TgZ(10,"label",48),t._uU(11," Stock"),t.qZA(),t.TgZ(12,"input",49),t.NdJ("keypress",function(s){return t.CHM(e),t.oxw().numberOnly(s)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",50),t.TgZ(14,"button",51),t._uU(15,"Add Stock"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",52),t.TgZ(17,"button",53),t.NdJ("click",function(){return t.CHM(e).$implicit.close("Save click")}),t._uU(18,"Close"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("formGroup",e.stockForm)}}const I=function(){return[5,10,20,30,50,100]};let J=(()=>{class o{constructor(e,n,s,r){this.http=e,this.modalService=n,this._formBuilder=s,this.stockService=r,this.dataSource=new l.by,this.loading=!1,this.tablePaging={offset:0,limit:20,previousSize:0},this.displayedColumnsOne=["name","stock","action"]}ngOnInit(){this.stockForm=this._formBuilder.group({productName:["",[c.kI.required]],stock:["",[c.kI.required]]}),this.getData()}ngAfterViewInit(){this.getData()}getData(){this.stockService.getStock({params:this.tablePaging}).subscribe(e=>{this.loading=!1,this.Stocks=e.Stocks,console.log("this.users",this.Stocks),this.Stocks.length=e.total,this.dataSource=new l.by(this.Stocks),this.dataSource.paginator=this.Paginator})}getNextData(){this.loading=!0,this.userDataPromise&&this.userDataPromise.unsubscribe(),this.userDataPromise=this.stockService.getStock({params:this.tablePaging}).subscribe(e=>{this.loading=!1,console.log(e.Stocks),this.Stocks.length=this.tablePaging.previousSize,this.Stocks.push(...e.Stocks),this.Stocks.length=e.total,this.dataSource=new l.by(this.Stocks),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.Paginator})}pageChanged(e){this.tablePaging.limit=e.pageSize,this.tablePaging.offset=e.pageIndex.toString(),this.tablePaging.previousSize=e.pageSize*e.pageIndex,this.getNextData()}applyCategoryFilter(e){console.log("this.tablePaging",this.tablePaging);var n=e.trim().toLowerCase();this.userDataPromise=this.stockService.filterStock(n).subscribe(s=>{this.loading=!1,this.Stocks=s.Stocks,console.log("this.Products",this.Stocks),this.Stocks.length=s.total,this.dataSource=new l.by(this.Stocks),this.dataSource.paginator=this.Paginator})}openUpdateModal(e){console.log(e),this.selectedStock=e.isBundle,this.selectedStockId=e._id,console.log(this.selectedStock),this.stockForm.patchValue(e),console.log("openModal",this.selectedStock),this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{this.stockForm.reset()})}postData(){if(console.log("postData",this.stockForm.value),this.stockForm.markAllAsTouched(),this.stockForm.invalid)return console.log("this.vendors",this.stockForm.value),!1;this.selectedStock?this.stockService.updateBundleStock(this.selectedStockId,this.stockForm.value).subscribe(e=>{this.modalService.dismissAll(),this.stockForm.reset(),console.log(this.Stocks.length),this.getNextData()},e=>{console.log(e)}):this.stockService.updateStock(this.selectedStockId,this.stockForm.value).subscribe(e=>{console.log(e),this.modalService.dismissAll(),this.stockForm.reset(),console.log(this.Stocks.length),this.getNextData()},e=>{console.log(e)})}numberOnly(e){const n=e.which?e.which:e.keyCode;return!(n>31&&(n<48||n>57))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.eN),t.Y36(_.FF),t.Y36(c.qu),t.Y36(Z.q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-stocklow"]],viewQuery:function(e,n){if(1&e&&(t.Gf(v,5),t.Gf(d.YE,5),t.Gf(x,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.content=s.first),t.iGM(s=t.CRH())&&(n.sort=s.first),t.iGM(s=t.CRH())&&(n.Paginator=s.first)}},decls:23,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0",2,"max-height","90vh","overflow-y","scroll"],[1,"flex-auto","p-6","sm:p-10"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],[1,"row"],[1,"mat-elevation-z8","shadow-sm","p-3","w-100","bg-white"],[1,"d-flex","px-3","py-4"],[1,"col-6"],[2,"cursor","pointer",3,"click"],[1,"form-group"],["type","text","placeholder","Search",1,"form-control","ms-auto","bg-light","sortInput","rounded-pill",2,"max-width","268px",3,"keyup"],["caetgoryInput",""],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["class","text-center",4,"ngIf"],["table",""],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],["Paginator",""],["class","bd-example-modal-lg"],["content",""],[1,"d-flex","justify-content-center"],[1,"progress-spinner"],[1,"text-center"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","stock"],["matColumnDef","action"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","color","primary",1,"my-2",3,"click"],[1,"me-2"],["mat-header-row",""],["mat-row",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"px-4",3,"formGroup","ngSubmit"],[1,"form-group","mb-3","col-12"],["for","",1,"mb-1"],["type","text","id","stock","name","stock","formControlName","stock","placeholder","$50",1,"form-control",3,"keypress"],[1,"form-group","mb-3"],["type","submit",1,"btn","btn-primary"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t._UZ(4,"div",4),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"mat-icon",9),t.NdJ("click",function(){return n.getNextData()}),t._uU(10,"autorenew"),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"input",11,12),t.NdJ("keyup",function(){t.CHM(s);const m=t.MAs(14);return n.applyCategoryFilter(m.value)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,C,2,0,"div",13),t.YNc(16,T,2,0,"div",14),t.YNc(17,P,12,3,"ng-template",null,15,t.W1O),t.TgZ(19,"mat-paginator",16,17),t.NdJ("page",function(m){return n.pageChanged(m)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(21,U,19,1,"ng-template",18,19,t.W1O),t.qZA()}if(2&e){const s=t.MAs(18);t.xp6(15),t.Q6J("ngIf",n.loading)("ngIfElse",s),t.xp6(1),t.Q6J("ngIf",0===n.dataSource.data.length),t.xp6(3),t.Q6J("pageIndex",0)("pageSize",n.tablePaging.limit)("pageSizeOptions",t.DdM(6,I))}},directives:[u.Hw,p.O5,h.NW,f.$g,l.BZ,d.YE,l.w1,l.fO,l.Dz,l.as,l.nj,l.ge,l.ev,S.lW,l.XQ,l.Gk,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],styles:[".mat-simple-snackbar{justify-content:center!important}"]}),o})();var M=i(171),Y=i(8295),z=i(9983),H=i(7001),O=i(3423),Q=i(8550),B=i(3771),G=i(4466);let R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,O.Bz.forChild([{path:"",component:J}]),G.m,l.p0,S.ot,u.Ps,h.TU,d.JX,c.u5,c.UX,M.To,Y.lN,z.c,B.T,Q.xD,f.Cq,H.ZX]]}),o})()}}]);