"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[494],{7494:(R,p,i)=>{i.r(p),i.d(p,{AddBundleProductModule:()=>j});var c=i(8583),m=i(6461),d=i(3679),e=i(7716),v=i(4980),A=i(2082),C=i(6618),g=i(7001),T=i(2490),b=i(5494),P=i(1466),h=i(8295),f=i(7441),u=i(611),q=i(2458),Z=i(6627);function y(r,l){if(1&r&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.productName)}}function B(r,l){if(1&r&&(e.TgZ(0,"div",50),e.TgZ(1,"div",51),e._UZ(2,"img",52),e.qZA(),e.qZA()),2&r){const t=l.$implicit;e.xp6(2),e.Q6J("src",t,e.LSH)}}function x(r,l){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.categoryName)}}function U(r,l){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.subCategoryName)}}function F(r,l){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.brandName)}}function I(r,l){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.name)}}function N(r,l){1&r&&(e.TgZ(0,"button",55),e.TgZ(1,"mat-icon"),e._uU(2,"cancel"),e.qZA(),e.qZA())}function J(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"mat-chip",53),e.NdJ("removed",function(){const n=e.CHM(t).$implicit;return e.oxw().remove(n)}),e._uU(1),e.YNc(2,N,3,0,"button",54),e.qZA()}if(2&r){const t=l.$implicit,o=e.oxw();e.Q6J("selectable",o.selectable)("removable",o.removable),e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",o.removable)}}let k=(()=>{class r{constructor(t,o,a,n,s,H,E,K){this.productsService=t,this.categoriesService=o,this.subCategoriesService=a,this._formBuilder=n,this._snackBar=s,this.brandsService=H,this.vendorsService=E,this.bundleProductsService=K,this.storeImg=File,this.imgUploading=!1,this.showPreview=!1,this.urls=[],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[m.K5,m.OC],this.tags=[]}ngOnInit(){this.getCategories(),this.getBrands(),this.getVendors(),this.getProducts(),this.addBundleProductsForm=this._formBuilder.group({productName:["",[d.kI.required]],products:["",[d.kI.required]],productDescription:["",[d.kI.required]],productImagepicture:["",[d.kI.required]],productImages:[""],productCode:["",[d.kI.required]],productModel:["",[d.kI.required]],productCategory:["",[d.kI.required]],productSubCategory:["",[d.kI.required]],productBrand:["",[d.kI.required]],vendor:["",[d.kI.required]],tags:["",[d.kI.required]],stock:["",[d.kI.required]],todaysDeal:[!1],publish:[!1],featured:[!1],price:["",[d.kI.required]]})}add(t){const o=(t.value||"").trim();o&&(this.tags.push({name:o}),this.addBundleProductsForm.patchValue({tags:this.tags})),t.chipInput.clear()}remove(t){const o=this.tags.indexOf(t);o>=0&&(this.tags.splice(o,1),this.addBundleProductsForm.patchValue({tags:this.tags}))}getCategories(){this.categoriesService.listCategories().subscribe(t=>{this.getCategoriesList=t.Categories},t=>{console.log(t)})}getCategoryValue(t){console.log(t.target.value),this.getSubCategories(t.target.value)}getSubCategories(t){this.subCategoriesService.getDataByCategoryId(t).subscribe(o=>{this.getSubCategoriesList=o.SubCategory,console.log("getSubCategoriesList",this.getSubCategoriesList)},o=>{console.log(o)})}getBrands(){this.brandsService.listBrands().subscribe(t=>{this.getBrandsList=t.Brands},t=>{console.log(t)})}getProducts(){this.productsService.listProduct().subscribe(t=>{console.log(t),this.getProductList=t.Products},t=>{console.log(t)})}getVendors(){this.vendorsService.listVendors().subscribe(t=>{this.getVendorsList=t.Vendors},t=>{console.log(t)})}uploadProductImage(t){this.showPreview=!0,this.urls=[];let o=t.target.files;if(o)for(let a of o){let n=new FileReader;n.onload=s=>{this.urls.push(s.target.result)},n.readAsDataURL(a)}this.storeImg=t.target.files}postFormInput(){if(console.log(this.addBundleProductsForm.value.products),this.addBundleProductsForm.invalid||this.imgUploading)return console.log(this.addBundleProductsForm.value),!1;this.bundleProductsService.addBundleProducts(this.addBundleProductsForm.value).subscribe(t=>{console.log(t),this.addBundleProductsForm.reset(),this.tags=[],this.urls=[],this.showPreview=!1,this._snackBar.open(t.message,"",{duration:2e3,verticalPosition:"top"})},t=>{console.log(t),this._snackBar.open(t.error.message,"",{duration:2e3,verticalPosition:"top"})})}postData(){this.addBundleProductsForm.markAllAsTouched(),console.log(this.storeImg);const t=new FormData;var o=[];if(0==this.showPreview)return this._snackBar.open("At least one image is required","",{duration:2e3,verticalPosition:"top"}),!1;for(let n=0;n<this.storeImg.length;n++)t.append("images[]",this.storeImg[n]),o.push(this.storeImg[n].name.split(".").pop());const a=o.toString();return console.log(t),this.imgUploading=!0,this.addBundleProductsForm.invalid?(this._snackBar.open("All fields are required","",{duration:2e3,verticalPosition:"top"}),!1):a.match(/png/g)||a.match(/jpeg/g)||a.match(/jpg/g)?void this.productsService.uploadProductImage(t).subscribe(n=>{console.log(n.imagePath),this.addBundleProductsForm.patchValue({productImages:n.imagePath}),this.imgUploading=!1,this.postFormInput(),console.log(this.addBundleProductsForm.value)},n=>{console.log(n)}):(this._snackBar.open("Only jpg, png and jpeg formats are allowed","",{duration:2e3,verticalPosition:"top"}),console.log(a),!1)}applyProductFilter(t){var o=t.trim().toLowerCase();this.productsService.filterProduct(o).subscribe(a=>{this.getProductList=a.Products,console.log("this.Products",this.getProductList)})}numberOnly(t){const o=t.which?t.which:t.keyCode;return!(o>31&&(o<48||o>57))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(v.s),e.Y36(A.G),e.Y36(C.F),e.Y36(d.qu),e.Y36(g.ux),e.Y36(T.c),e.Y36(b.n),e.Y36(P.Q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-bundle-product"]],decls:111,vars:12,consts:[[1,"flex","flex-col","flex-auto","min-w-0",2,"max-height","90vh","overflow-y","scroll"],[1,"flex-auto","p-6","sm:p-10"],[1,"row"],[1,"mx-auto","col-12"],[1,"p-4","shadow","bg-white","products-form-wrapper","position-relative"],["id","productsForm",3,"formGroup"],[1,"col-md-12","mb-4","d-flex","align-items-end"],[1,"me-3"],["src","assets/images/logo/logo.svg","alt","",1,"",2,"width","35px","top","40px"],[2,"width","fit-content"],[1,"mt-3","mb-2","fw-bold","h4","text-center"],[1,"mx-auto","bg-primary",2,"height","2px","width","120px"],[1,"form-group","mb-3","col-md-6","col-12"],["for","",1,"mb-1"],["type","text","id","productName","name","productName","formControlName","productName","placeholder","John doe",1,"form-control"],["appearance","fill"],["formControlName","products","multiple",""],[1,"my-2","p-2"],["type","text","placeholder","search",1,"form-control","w-75","rounded-pill",3,"keyup"],["filterProduct",""],[3,"value",4,"ngFor","ngForOf"],["id","productDescription","name","productDescription","formControlName","productDescription","placeholder","John doe",1,"form-control",2,"height","20px"],["type","file","multiple","","formControlName","productImagepicture",1,"form-control",3,"change"],["type","text","formControlName","productImages","placeholder","John doe",1,"form-control","d-none"],[1,"my-3","col-12","form-group",3,"ngClass"],["class","col-lg-4 col-md-6 my-2",4,"ngFor","ngForOf"],["type","text","id","productCode","name","productCode","formControlName","productCode","placeholder","John doe",1,"form-control"],["type","text","id","productModel","name","productModel","formControlName","productModel","placeholder","John doe",1,"form-control"],["aria-label","Default select example","formControlName","productCategory",1,"form-select",3,"change"],["value","","selected","","hidden","","disabled",""],["aria-label","Default select example","formControlName","productSubCategory",1,"form-select"],["aria-label","Default select example","formControlName","productBrand",1,"form-select"],[1,"form-group","mb-3","col-12"],["aria-label","Default select example","formControlName","vendor",1,"form-select"],["appearance","fill",1,"example-chip-list"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["type","text","id","proce","name","price","formControlName","price","placeholder","$50",1,"form-control",3,"keypress"],["type","text","id","stock","name","stock","formControlName","stock","placeholder","$50",1,"form-control",3,"keypress"],[1,"form-check"],["type","checkbox","value","","id","flexCheckDefault","formControlName","todaysDeal",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","value","","id","flexCheckDefault1","formControlName","publish",1,"form-check-input"],["for","flexCheckDefault1",1,"form-check-label"],["type","checkbox","value","","id","flexCheckDefault1","formControlName","featured",1,"form-check-input"],[1,"form-group","mb-3"],["type","submit",1,"btn","btn-primary","py-2",3,"click"],[3,"value"],[1,"col-lg-4","col-md-6","my-2"],[1,"col-12","rounded-lg","shadow-lg","p-2","border-4","border-blue-200","border-opacity-100"],["alt","",1,"w-100",3,"src"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"form",5),e.TgZ(6,"div",2),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"img",8),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e._uU(12,"Add Bundle Product"),e.qZA(),e._UZ(13,"div",11),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"label",13),e._uU(16," Products"),e.qZA(),e._UZ(17,"input",14),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"label",13),e._uU(20," Product"),e.qZA(),e.TgZ(21,"mat-form-field",15),e.TgZ(22,"mat-select",16),e.TgZ(23,"div",17),e.TgZ(24,"input",18,19),e.NdJ("keyup",function(){e.CHM(a);const s=e.MAs(25);return o.applyProductFilter(s.value)}),e.qZA(),e.qZA(),e.YNc(26,y,2,2,"mat-option",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",12),e.TgZ(28,"label",13),e._uU(29," Description"),e.qZA(),e.TgZ(30,"textarea",21),e._uU(31,"                                    "),e.qZA(),e.qZA(),e.TgZ(32,"div",12),e.TgZ(33,"label",13),e._uU(34," Image"),e.qZA(),e.TgZ(35,"input",22),e.NdJ("change",function(s){return o.uploadProductImage(s)}),e.qZA(),e._UZ(36,"input",23),e.qZA(),e.TgZ(37,"div",24),e.TgZ(38,"div",2),e.YNc(39,B,3,1,"div",25),e.qZA(),e.qZA(),e.TgZ(40,"div",12),e.TgZ(41,"label",13),e._uU(42," Product Code"),e.qZA(),e._UZ(43,"input",26),e.qZA(),e.TgZ(44,"div",12),e.TgZ(45,"label",13),e._uU(46," Product Model"),e.qZA(),e._UZ(47,"input",27),e.qZA(),e.TgZ(48,"div",12),e.TgZ(49,"label",13),e._uU(50," Category"),e.qZA(),e.TgZ(51,"select",28),e.NdJ("change",function(s){return o.getCategoryValue(s)}),e.TgZ(52,"option",29),e._uU(53,"Select"),e.qZA(),e.YNc(54,x,2,2,"option",20),e.qZA(),e.qZA(),e.TgZ(55,"div",12),e.TgZ(56,"label",13),e._uU(57," Sub Category"),e.qZA(),e.TgZ(58,"select",30),e.TgZ(59,"option",29),e._uU(60,"Select"),e.qZA(),e.YNc(61,U,2,2,"option",20),e.qZA(),e.qZA(),e.TgZ(62,"div",12),e.TgZ(63,"label",13),e._uU(64," Brand"),e.qZA(),e.TgZ(65,"select",31),e.TgZ(66,"option",29),e._uU(67,"Select"),e.qZA(),e.YNc(68,F,2,2,"option",20),e.qZA(),e.qZA(),e.TgZ(69,"div",12),e.TgZ(70,"div",32),e.TgZ(71,"label",13),e._uU(72," Vendor"),e.qZA(),e.TgZ(73,"select",33),e.TgZ(74,"option",29),e._uU(75,"Select"),e.qZA(),e.YNc(76,I,2,2,"option",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",12),e.TgZ(78,"label",13),e._uU(79," Tags"),e.qZA(),e.TgZ(80,"mat-form-field",34),e.TgZ(81,"mat-chip-list",35,36),e.YNc(83,J,3,4,"mat-chip",37),e.TgZ(84,"input",38),e.NdJ("matChipInputTokenEnd",function(s){return o.add(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"div",12),e.TgZ(86,"label",13),e._uU(87," Price"),e.qZA(),e.TgZ(88,"input",39),e.NdJ("keypress",function(s){return o.numberOnly(s)}),e.qZA(),e.qZA(),e.TgZ(89,"div",12),e.TgZ(90,"label",13),e._uU(91," Stock"),e.qZA(),e.TgZ(92,"input",40),e.NdJ("keypress",function(s){return o.numberOnly(s)}),e.qZA(),e.qZA(),e.TgZ(93,"div",32),e.TgZ(94,"div",41),e._UZ(95,"input",42),e.TgZ(96,"label",43),e._uU(97," Today's Deal "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(98,"div",32),e.TgZ(99,"div",41),e._UZ(100,"input",44),e.TgZ(101,"label",45),e._uU(102," Publish "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(103,"div",32),e.TgZ(104,"div",41),e._UZ(105,"input",46),e.TgZ(106,"label",45),e._uU(107," feature "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(108,"div",47),e.TgZ(109,"button",48),e.NdJ("click",function(){return o.postData()}),e._uU(110,"Add Product"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const a=e.MAs(82);e.xp6(5),e.Q6J("formGroup",o.addBundleProductsForm),e.xp6(21),e.Q6J("ngForOf",o.getProductList),e.xp6(11),e.Q6J("ngClass",o.showPreview?"d-block":"d-none"),e.xp6(2),e.Q6J("ngForOf",o.urls),e.xp6(15),e.Q6J("ngForOf",o.getCategoriesList),e.xp6(7),e.Q6J("ngForOf",o.getSubCategoriesList),e.xp6(7),e.Q6J("ngForOf",o.getBrandsList),e.xp6(8),e.Q6J("ngForOf",o.getVendorsList),e.xp6(7),e.Q6J("ngForOf",o.tags),e.xp6(1),e.Q6J("matChipInputFor",a)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur)}},directives:[d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u,h.KE,f.gD,c.sg,c.mk,d.EJ,d.YN,d.Kr,u.qn,u.oH,d.Wl,q.ey,u.HS,c.O5,u.qH,Z.Hw],styles:[".products-form-wrapper[_ngcontent-%COMP%]{border-radius:10px}  .mat-simple-snackbar{justify-content:center!important}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545!important}#productsForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#817777!important}.example-chip-list[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{width:100%!important}"]}),r})();var S=i(1095),_=i(171),O=i(9983),D=i(9692),L=i(4885),M=i(1494),Q=i(2789),Y=i(3423),w=i(8550),V=i(3771),$=i(4466);let j=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.ez,Y.Bz.forChild([{path:"",component:k}]),$.m,Q.p0,S.ot,Z.Ps,D.TU,M.JX,d.u5,d.UX,_.To,h.lN,O.c,V.T,w.xD,L.Cq,g.ZX,u.Hi,f.LD]]}),r})()}}]);