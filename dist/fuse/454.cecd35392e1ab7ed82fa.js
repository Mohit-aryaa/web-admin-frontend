"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[454],{4454:(tt,p,l)=>{l.r(p),l.d(p,{StockLogsModule:()=>K});var u=l(8583),r=l(1494),g=l(2789),t=l(7716),d=l(1841),Z=l(9517),m=l(3679),L=l(6137);let T=(()=>{class o{constructor(e){this._http=e,this.api_url="http://localhost:3000/stockLogs"}getStockLogs(e){return this._http.get(this.api_url+"?offset="+e.params.offset+"&limit="+e.params.limit+"&previousSize="+e.params.previousSize)}filterStockLogs(e){return this._http.get(this.api_url+"?filter="+e)}deleteStockLogs(e){return this._http.get(this.api_url+"/"+e._id,e)}bulkDelete(e){return this._http.post(this.api_url+"/bulkDelete",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=l(7001),f=l(6627),k=l(1095),_=l(9692),S=l(4885);const x=["content"],C=["Paginator"];function y(o,i){1&o&&(t.TgZ(0,"div",19),t._UZ(1,"mat-spinner",20),t.qZA())}function D(o,i){1&o&&(t.TgZ(0,"div",21),t._uU(1," No Records Found! "),t.qZA())}function A(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"th",33),t.TgZ(1,"input",34),t.NdJ("click",function(n){return t.CHM(e),t.oxw(2).checkAllDeleteItems(n)}),t.qZA(),t.qZA()}}function N(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"div",36),t.TgZ(2,"input",37),t.NdJ("click",function(){const n=t.CHM(e),c=n.$implicit,a=n.index;return t.oxw(2).getDeleteItems(c,a)}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(2),t.s9C("id",e._id)}}function I(o,i){1&o&&(t.TgZ(0,"th",33),t._uU(1," Name"),t.qZA())}function b(o,i){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.productName)}}function B(o,i){1&o&&(t.TgZ(0,"th",33),t._uU(1," Log Type"),t.qZA())}function Y(o,i){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.logType)}}function P(o,i){1&o&&(t.TgZ(0,"th",33),t._uU(1," Entry Type"),t.qZA())}function U(o,i){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.entryType)}}function q(o,i){1&o&&(t.TgZ(0,"th",33),t._uU(1," Stock"),t.qZA())}function w(o,i){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.quantity)}}function z(o,i){1&o&&(t.TgZ(0,"th",33),t._uU(1," Action"),t.qZA())}function J(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"button",38),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2);return a.deleteStockLog(c,a.i)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA()}}function Q(o,i){1&o&&t._UZ(0,"tr",39)}function E(o,i){1&o&&t._UZ(0,"tr",40)}function M(o,i){if(1&o&&(t.TgZ(0,"table",22),t.ynx(1,23),t.YNc(2,A,2,0,"th",24),t.YNc(3,N,3,1,"td",25),t.BQk(),t.ynx(4,26),t.YNc(5,I,2,0,"th",24),t.YNc(6,b,2,1,"td",25),t.BQk(),t.ynx(7,27),t.YNc(8,B,2,0,"th",24),t.YNc(9,Y,2,1,"td",25),t.BQk(),t.ynx(10,28),t.YNc(11,P,2,0,"th",24),t.YNc(12,U,2,1,"td",25),t.BQk(),t.ynx(13,29),t.YNc(14,q,2,0,"th",24),t.YNc(15,w,2,1,"td",25),t.BQk(),t.ynx(16,30),t.YNc(17,z,2,0,"th",24),t.YNc(18,J,4,0,"td",25),t.BQk(),t.YNc(19,Q,1,0,"tr",31),t.YNc(20,E,1,0,"tr",32),t.qZA()),2&o){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumnsOne),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumnsOne)}}const F=function(){return[5,10,20,30,50,100]};let O=(()=>{class o{constructor(e,s,n,c,a,v){this.http=e,this.modalService=s,this._formBuilder=n,this.stockService=c,this.stockLogsService=a,this._snackBar=v,this.dataSource=new g.by,this.loading=!1,this.setBulkDeleteItems=[],this.tablePaging={offset:0,limit:20,previousSize:0},this.displayedColumnsOne=["check","name","logType","entryType","stock","action"]}ngOnInit(){this.getData()}ngAfterViewInit(){this.getData()}getData(){this.stockLogsService.getStockLogs({params:this.tablePaging}).subscribe(e=>{console.log("getdata",e),this.loading=!1,this.StockLogs=e.StockLogs,console.log("this.users",this.StockLogs),this.StockLogs.length=e.total,this.dataSource=new g.by(this.StockLogs),this.dataSource.paginator=this.Paginator})}getNextData(){this.loading=!0,this.userDataPromise&&this.userDataPromise.unsubscribe(),this.userDataPromise=this.stockLogsService.getStockLogs({params:this.tablePaging}).subscribe(e=>{this.loading=!1,console.log(e.StockLogs),this.StockLogs.length=this.tablePaging.previousSize,this.StockLogs.push(...e.StockLogs),this.StockLogs.length=e.total,this.dataSource=new g.by(this.StockLogs),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.Paginator})}pageChanged(e){this.tablePaging.limit=e.pageSize,this.tablePaging.offset=e.pageIndex.toString(),this.tablePaging.previousSize=e.pageSize*e.pageIndex,this.getNextData()}applyFilter(e){console.log("this.tablePaging",this.tablePaging);var s=e.trim().toLowerCase();this.userDataPromise=this.stockLogsService.filterStockLogs(s).subscribe(n=>{this.loading=!1,this.StockLogs=n.StockLogs,console.log("this.StockLogs",this.StockLogs),this.StockLogs.length=n.total,this.dataSource=new g.by(this.StockLogs),this.dataSource.paginator=this.Paginator})}deleteStockLog(e){confirm("Are you sure to delete ?")&&this.stockLogsService.deleteStockLogs(e).subscribe(s=>{this.getNextData()})}checkAllDeleteItems(e){var s=document.getElementsByClassName("deleteChecks");if(e.target.checked)for(let n=0;n<s.length;n++){let c=s[n];c.checked=!0;let a=c.getAttribute("id");console.log(c),this.setBulkDeleteItems.push(a)}else for(let n=0;n<s.length;n++){let c=s[n];c.checked=!1,console.log(c),this.setBulkDeleteItems=[]}}getDeleteItems(e,s){document.getElementById("deleteAll").checked=!1;var a=document.getElementById(e._id).checked;console.log("index",this.setBulkDeleteItems),a?this.setBulkDeleteItems.push(e._id):this.setBulkDeleteItems.splice(s,1),console.log(this.setBulkDeleteItems)}BulkDelete(){void 0!==typeof this.setBulkDeleteItems&&this.setBulkDeleteItems.length>0?confirm("Are you sure to delete ?")&&this.stockLogsService.bulkDelete(this.setBulkDeleteItems).subscribe(e=>{console.log("response",e),document.getElementById("deleteAll").checked=!1,this._snackBar.open(e.message,"",{duration:2e3,verticalPosition:"top"}),this.getNextData()},e=>{console.log(e)}):this._snackBar.open("No product selected","",{duration:2e3,verticalPosition:"top"})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.eN),t.Y36(Z.FF),t.Y36(m.qu),t.Y36(L.q),t.Y36(T),t.Y36(h.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-stock-logs"]],viewQuery:function(e,s){if(1&e&&(t.Gf(x,5),t.Gf(r.YE,5),t.Gf(C,5)),2&e){let n;t.iGM(n=t.CRH())&&(s.content=n.first),t.iGM(n=t.CRH())&&(s.sort=n.first),t.iGM(n=t.CRH())&&(s.Paginator=n.first)}},decls:23,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0",2,"max-height","90vh","overflow-y","scroll"],[1,"flex-auto","p-6","sm:p-10"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],[1,"row"],[1,"mat-elevation-z8","shadow-sm","p-3","w-100","bg-white"],[1,"d-flex","px-3","py-4"],[1,"col-6"],[2,"cursor","pointer",3,"click"],[1,"form-group","d-flex"],["mat-raised-button","","color","warn",1,"ms-auto","me-2",3,"click"],["type","text","placeholder","Search",1,"form-control","bg-light","sortInput","rounded-pill",2,"max-width","268px",3,"keyup"],["filterInput",""],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["class","text-center",4,"ngIf"],["table",""],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],["Paginator",""],[1,"d-flex","justify-content-center"],[1,"progress-spinner"],[1,"text-center"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","logType"],["matColumnDef","entryType"],["matColumnDef","stock"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["type","checkbox","id","deleteAll","value","",1,"form-check-input",3,"click"],["mat-cell",""],[1,"form-check"],["type","checkbox","value","",1,"form-check-input","deleteChecks",3,"id","click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t._UZ(4,"div",4),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"mat-icon",9),t.NdJ("click",function(){return s.getNextData()}),t._uU(10,"autorenew"),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"button",11),t.NdJ("click",function(){return s.BulkDelete()}),t._uU(14,"Bulk Delete"),t.qZA(),t.TgZ(15,"input",12,13),t.NdJ("keyup",function(){t.CHM(n);const a=t.MAs(16);return s.applyFilter(a.value)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,y,2,0,"div",14),t.YNc(18,D,2,0,"div",15),t.YNc(19,M,21,3,"ng-template",null,16,t.W1O),t.TgZ(21,"mat-paginator",17,18),t.NdJ("page",function(a){return s.pageChanged(a)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(20);t.xp6(17),t.Q6J("ngIf",s.loading)("ngIfElse",n),t.xp6(1),t.Q6J("ngIf",0===s.dataSource.data.length),t.xp6(3),t.Q6J("pageIndex",0)("pageSize",s.tablePaging.limit)("pageSizeOptions",t.DdM(6,F))}},directives:[f.Hw,k.lW,u.O5,_.NW,S.$g,g.BZ,r.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.ge,g.ev,g.XQ,g.Gk],styles:[".mat-simple-snackbar{justify-content:center!important}"]}),o})();var H=l(611),R=l(171),G=l(8295),$=l(9983),j=l(3423),X=l(8550),W=l(3771),V=l(4466);let K=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,j.Bz.forChild([{path:"",component:O}]),V.m,g.p0,k.ot,f.Ps,_.TU,r.JX,m.u5,m.UX,R.To,G.lN,$.c,W.T,X.xD,S.Cq,h.ZX,H.Hi]]}),o})()}}]);