"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[579],{3579:(V,d,a)=>{a.r(d),a.d(d,{QuestionsModule:()=>W});var p=a(8583),c=a(3679),m=a(1494),u=a(2789),t=a(7716),g=a(1841),Q=a(9517),C=a(6137);let T=(()=>{class o{constructor(e){this._http=e,this.api_url="http://localhost:3000/questions"}getQuestions(e){return this._http.get(this.api_url+"?offset="+e.params.offset+"&limit="+e.params.limit+"&previousSize="+e.params.previousSize)}updateAnswers(e,n){return this._http.put(this.api_url+"/"+e,n)}filterQuestions(e){return this._http.get(this.api_url+"?filter="+e)}deleteQuestions(e){return this._http.delete(this.api_url+"/"+e._id,e)}bulkDelete(e){return this._http.post(this.api_url+"/bulkDelete",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=a(7001),_=a(6627),f=a(1095),Z=a(9692),v=a(4885);const A=["content"],k=["Paginator"];function b(o,i){1&o&&(t.TgZ(0,"div",21),t._UZ(1,"mat-spinner",22),t.qZA())}function q(o,i){1&o&&(t.TgZ(0,"div",23),t._uU(1," No Records Found! "),t.qZA())}function D(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"th",34),t.TgZ(1,"input",35),t.NdJ("click",function(s){return t.CHM(e),t.oxw(2).checkAllDeleteItems(s)}),t.qZA(),t.qZA()}}function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"div",37),t.TgZ(2,"input",38),t.NdJ("click",function(){const s=t.CHM(e),l=s.$implicit,r=s.index;return t.oxw(2).getDeleteItems(l,r)}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(2),t.s9C("id",e._id)}}function y(o,i){1&o&&(t.TgZ(0,"th",34),t._uU(1," Question"),t.qZA())}function N(o,i){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.question)}}function I(o,i){1&o&&(t.TgZ(0,"th",34),t._uU(1," Product"),t.qZA())}function B(o,i){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.product.productName)}}function w(o,i){1&o&&(t.TgZ(0,"th",34),t._uU(1," Brand"),t.qZA())}function U(o,i){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.product.productBrandName)}}function F(o,i){1&o&&(t.TgZ(0,"th",34),t._uU(1," Action"),t.qZA())}function Y(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"button",39),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw(2);return r.openUpdateModal(l,r.i)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"button",40),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw(2);return r.deleteQuestions(l,r.i)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}}function J(o,i){1&o&&t._UZ(0,"tr",41)}function P(o,i){1&o&&t._UZ(0,"tr",42)}function M(o,i){if(1&o&&(t.TgZ(0,"table",24),t.ynx(1,25),t.YNc(2,D,2,0,"th",26),t.YNc(3,S,3,1,"td",27),t.BQk(),t.ynx(4,28),t.YNc(5,y,2,0,"th",26),t.YNc(6,N,2,1,"td",27),t.BQk(),t.ynx(7,29),t.YNc(8,I,2,0,"th",26),t.YNc(9,B,2,1,"td",27),t.BQk(),t.ynx(10,30),t.YNc(11,w,2,0,"th",26),t.YNc(12,U,2,1,"td",27),t.BQk(),t.ynx(13,31),t.YNc(14,F,2,0,"th",26),t.YNc(15,Y,7,0,"td",27),t.BQk(),t.YNc(16,J,1,0,"tr",32),t.YNc(17,P,1,0,"tr",33),t.qZA()),2&o){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumnsOne),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumnsOne)}}function z(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",43),t.TgZ(1,"h4",44),t._uU(2,"Add Answer"),t.qZA(),t.TgZ(3,"button",45),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t.TgZ(4,"span",46),t._uU(5,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",47),t.TgZ(7,"form",48),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().postData()}),t.TgZ(8,"div",5),t.TgZ(9,"div",49),t.TgZ(10,"label",50),t._uU(11," Name"),t.qZA(),t._UZ(12,"textarea",51),t.qZA(),t.qZA(),t.TgZ(13,"div",52),t.TgZ(14,"button",53),t._uU(15,"Add Answer"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",54),t.TgZ(17,"button",55),t.NdJ("click",function(){return t.CHM(e).$implicit.close("Save click")}),t._uU(18,"Close"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("formGroup",e.questionForm)}}const H=function(){return[5,10,20,30,50,100]};let E=(()=>{class o{constructor(e,n,s,l,r,x){this.http=e,this.modalService=n,this._formBuilder=s,this.stockService=l,this.questionsService=r,this._snackBar=x,this.dataSource=new u.by,this.loading=!1,this.setBulkDeleteItems=[],this.tablePaging={offset:0,limit:20,previousSize:0},this.displayedColumnsOne=["check","question","products","brand","action"]}ngOnInit(){this.getData(),this.questionForm=this._formBuilder.group({answer:["",[c.kI.required]]})}ngAfterViewInit(){this.getData()}getData(){this.questionsService.getQuestions({params:this.tablePaging}).subscribe(e=>{console.log("getdata",e),this.loading=!1,this.Questions=e.Questions,console.log("Questions",this.Questions),this.Questions.length=e.total,this.dataSource=new u.by(this.Questions),this.dataSource.paginator=this.Paginator})}getNextData(){this.loading=!0,this.userDataPromise&&this.userDataPromise.unsubscribe(),this.userDataPromise=this.questionsService.getQuestions({params:this.tablePaging}).subscribe(e=>{this.loading=!1,console.log(e.Questions),this.Questions.length=this.tablePaging.previousSize,this.Questions.push(...e.Questions),this.Questions.length=e.total,this.dataSource=new u.by(this.Questions),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.Paginator})}pageChanged(e){this.tablePaging.limit=e.pageSize,this.tablePaging.offset=e.pageIndex.toString(),this.tablePaging.previousSize=e.pageSize*e.pageIndex,this.getNextData()}applyFilter(e){var n=e.trim().toLowerCase();this.userDataPromise=this.questionsService.filterQuestions(n).subscribe(s=>{this.loading=!1,this.Questions=s.Questions,this.Questions.length=s.total,this.dataSource=new u.by(this.Questions),this.dataSource.paginator=this.Paginator})}openUpdateModal(e){this.selectedQuestionId=e._id,console.log(this.selectedQuestionId),this.questionForm.patchValue(e),this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{this.questionForm.reset()})}postData(){if(console.log("postData",this.questionForm.value),this.questionForm.markAllAsTouched(),this.questionForm.invalid)return console.log("this.questionForm",this.questionForm.value),!1;this.questionsService.updateAnswers(this.selectedQuestionId,this.questionForm.value).subscribe(e=>{this.modalService.dismissAll(),this.questionForm.reset(),console.log(this.Questions.length),this.getNextData()},e=>{console.log(e)})}deleteQuestions(e){confirm("Are you sure to delete ?")&&this.questionsService.deleteQuestions(e).subscribe(n=>{this.getNextData()})}checkAllDeleteItems(e){var n=document.getElementsByClassName("deleteChecks");if(e.target.checked)for(let s=0;s<n.length;s++){let l=n[s];l.checked=!0;let r=l.getAttribute("id");console.log(l),this.setBulkDeleteItems.push(r)}else for(let s=0;s<n.length;s++){let l=n[s];l.checked=!1,console.log(l),this.setBulkDeleteItems=[]}}getDeleteItems(e,n){document.getElementById("deleteAll").checked=!1;var r=document.getElementById(e._id).checked;console.log("index",this.setBulkDeleteItems),r?this.setBulkDeleteItems.push(e._id):this.setBulkDeleteItems.splice(n,1),console.log(this.setBulkDeleteItems)}BulkDelete(){void 0!==typeof this.setBulkDeleteItems&&this.setBulkDeleteItems.length>0?confirm("Are you sure to delete ?")&&this.questionsService.bulkDelete(this.setBulkDeleteItems).subscribe(e=>{console.log("response",e),document.getElementById("deleteAll").checked=!1,this._snackBar.open(e.message,"",{duration:2e3,verticalPosition:"top"}),this.getNextData()},e=>{console.log(e)}):this._snackBar.open("No product selected","",{duration:2e3,verticalPosition:"top"})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.eN),t.Y36(Q.FF),t.Y36(c.qu),t.Y36(C.q),t.Y36(T),t.Y36(h.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-questions"]],viewQuery:function(e,n){if(1&e&&(t.Gf(A,5),t.Gf(m.YE,5),t.Gf(k,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.content=s.first),t.iGM(s=t.CRH())&&(n.sort=s.first),t.iGM(s=t.CRH())&&(n.Paginator=s.first)}},decls:25,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0",2,"max-height","90vh","overflow-y","scroll"],[1,"flex-auto","p-6","sm:p-10"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],[1,"row"],[1,"mat-elevation-z8","shadow-sm","p-3","w-100","bg-white"],[1,"d-flex","px-3","py-4"],[1,"col-6"],[2,"cursor","pointer",3,"click"],[1,"form-group","d-flex"],["mat-raised-button","","color","warn",1,"ms-auto","me-2",3,"click"],["type","text","placeholder","Search",1,"form-control","bg-light","sortInput","rounded-pill",2,"max-width","268px",3,"keyup"],["filterInput",""],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["class","text-center",4,"ngIf"],["table",""],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],["Paginator",""],["class","bd-example-modal-lg"],["content",""],[1,"d-flex","justify-content-center"],[1,"progress-spinner"],[1,"text-center"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","question"],["matColumnDef","products"],["matColumnDef","brand"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["type","checkbox","id","deleteAll","value","",1,"form-check-input",3,"click"],["mat-cell",""],[1,"form-check"],["type","checkbox","value","",1,"form-check-input","deleteChecks",3,"id","click"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"px-4",3,"formGroup","ngSubmit"],[1,"form-group","mb-3","col-12"],["for","",1,"mb-1"],["id","answer","name","answer","formControlName","answer","cols","30","rows","10",1,"form-control"],[1,"form-group","mb-3"],["type","submit",1,"btn","btn-primary"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t._UZ(4,"div",4),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"mat-icon",9),t.NdJ("click",function(){return n.getNextData()}),t._uU(10,"autorenew"),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"button",11),t.NdJ("click",function(){return n.BulkDelete()}),t._uU(14,"Bulk Delete"),t.qZA(),t.TgZ(15,"input",12,13),t.NdJ("keyup",function(){t.CHM(s);const r=t.MAs(16);return n.applyFilter(r.value)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,b,2,0,"div",14),t.YNc(18,q,2,0,"div",15),t.YNc(19,M,18,3,"ng-template",null,16,t.W1O),t.TgZ(21,"mat-paginator",17,18),t.NdJ("page",function(r){return n.pageChanged(r)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,z,19,1,"ng-template",19,20,t.W1O),t.qZA()}if(2&e){const s=t.MAs(20);t.xp6(17),t.Q6J("ngIf",n.loading)("ngIfElse",s),t.xp6(1),t.Q6J("ngIf",0===n.dataSource.data.length),t.xp6(3),t.Q6J("pageIndex",0)("pageSize",n.tablePaging.limit)("pageSizeOptions",t.DdM(6,H))}},directives:[_.Hw,f.lW,p.O5,Z.NW,v.$g,u.BZ,m.YE,u.w1,u.fO,u.Dz,u.as,u.nj,u.ge,u.ev,u.XQ,u.Gk,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],styles:[""]}),o})();var O=a(171),G=a(8295),$=a(9983),R=a(3423),j=a(8550),X=a(3771),L=a(4466);let W=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,R.Bz.forChild([{path:"",component:E}]),L.m,u.p0,f.ot,_.Ps,Z.TU,m.JX,c.u5,c.UX,O.To,G.lN,$.c,X.T,j.xD,v.Cq,h.ZX]]}),o})()}}]);