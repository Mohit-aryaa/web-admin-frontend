"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[261],{261:(lt,p,s)=>{s.r(p),s.d(p,{ProductsModule:()=>at});var g=s(8583),d=s(1494),l=s(2789),t=s(7716),T=s(1841),P=s(4980),v=s(9517),u=s(3679),h=s(7001),A=s(5494),_=s(3423),f=s(1095),Z=s(6627),C=s(9692),x=s(4885);const y=["content"],k=["Paginator"];function D(e,n){1&e&&(t.TgZ(0,"div",22),t._UZ(1,"mat-spinner",23),t.qZA())}function N(e,n){1&e&&(t.TgZ(0,"div",24),t._uU(1," No Records Found! "),t.qZA())}function S(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"th",42),t.TgZ(1,"div",43),t.TgZ(2,"input",44),t.NdJ("click",function(i){return t.CHM(o),t.oxw(2).checkAllDeleteItems(i)}),t.qZA(),t.qZA(),t.qZA()}}function b(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",45),t.TgZ(1,"div",46),t.TgZ(2,"input",47),t.NdJ("click",function(){const i=t.CHM(o),a=i.$implicit,r=i.index;return t.oxw(2).getDeleteItems(a,r)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=n.$implicit;t.xp6(2),t.s9C("id",o._id)}}function I(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Image"),t.qZA())}function q(e,n){if(1&e&&(t.TgZ(0,"td",45),t._UZ(1,"img",48),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.MGl("src","http://localhost:3000/",o.productImages[0],"",t.LSH)}}function B(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Name"),t.qZA())}function Y(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.productName)}}function U(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Sku"),t.qZA())}function w(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.productCode)}}function Q(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Stock"),t.qZA())}function M(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.stock)}}function O(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Category"),t.qZA())}function z(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.productCategory.categoryName)}}function J(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Sub Category"),t.qZA())}function H(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.productSubCategory.subCategoryName)}}function E(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," Brand"),t.qZA())}function $(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.productBrand.brandName)}}function F(e,n){1&e&&(t.TgZ(0,"th",42),t._uU(1," price"),t.qZA())}function G(e,n){if(1&e&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.price)}}function R(e,n){1&e&&(t.TgZ(0,"th",49),t._uU(1," Action "),t.qZA())}function j(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",50),t.TgZ(1,"a",51),t.TgZ(2,"button",52),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"button",53),t.NdJ("click",function(){const i=t.CHM(o),a=i.$implicit,r=i.index;return t.oxw(2).deleteProduct(a,r)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=n.$implicit;t.xp6(1),t.MGl("routerLink","/edit-product/",o._id,"")}}function L(e,n){1&e&&t._UZ(0,"tr",54)}function X(e,n){1&e&&t._UZ(0,"tr",55)}function W(e,n){if(1&e&&(t.TgZ(0,"table",25),t.ynx(1,26),t.YNc(2,S,3,0,"th",27),t.YNc(3,b,3,1,"td",28),t.BQk(),t.ynx(4,29),t.YNc(5,I,2,0,"th",27),t.YNc(6,q,2,1,"td",28),t.BQk(),t.ynx(7,30),t.YNc(8,B,2,0,"th",27),t.YNc(9,Y,2,1,"td",28),t.BQk(),t.ynx(10,31),t.YNc(11,U,2,0,"th",27),t.YNc(12,w,2,1,"td",28),t.BQk(),t.ynx(13,32),t.YNc(14,Q,2,0,"th",27),t.YNc(15,M,2,1,"td",28),t.BQk(),t.ynx(16,33),t.YNc(17,O,2,0,"th",27),t.YNc(18,z,2,1,"td",28),t.BQk(),t.ynx(19,34),t.YNc(20,J,2,0,"th",27),t.YNc(21,H,2,1,"td",28),t.BQk(),t.ynx(22,35),t.YNc(23,E,2,0,"th",27),t.YNc(24,$,2,1,"td",28),t.BQk(),t.ynx(25,36),t.YNc(26,F,2,0,"th",27),t.YNc(27,G,2,1,"td",28),t.BQk(),t.ynx(28,37),t.YNc(29,R,2,0,"th",38),t.YNc(30,j,8,1,"td",39),t.BQk(),t.YNc(31,L,1,0,"tr",40),t.YNc(32,X,1,0,"tr",41),t.qZA()),2&e){const o=t.oxw();t.Q6J("dataSource",o.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumnsOne),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsOne)}}const V=function(){return[5,10,20,30,50,100]};let K=(()=>{class e{constructor(o,c,i,a,r,m){this.http=o,this.productsService=c,this.modalService=i,this._formBuilder=a,this._snackBar=r,this.vendorsService=m,this.dataSource=new l.by,this.loading=!1,this.tablePaging={offset:0,limit:20,previousSize:0},this.vendorsList=[],this.setBulkDeleteItems=[],this.displayedColumnsOne=["check","name","image","productCode","stock","category","subCategory","brand","price","action"]}ngOnInit(){}ngAfterViewInit(){this.getData()}checkAllDeleteItems(o){var c=document.getElementsByClassName("deleteChecks");if(o.target.checked)for(let i=0;i<c.length;i++){let a=c[i];a.checked=!0;let r=a.getAttribute("id");console.log(a),this.setBulkDeleteItems.push(r)}else for(let i=0;i<c.length;i++){let a=c[i];a.checked=!1,console.log(a),this.setBulkDeleteItems=[]}}getDeleteItems(o,c){document.getElementById("deleteAll").checked=!1,document.getElementById(o._id).checked?this.setBulkDeleteItems.push(o._id):this.setBulkDeleteItems.splice(c,1),console.log(this.setBulkDeleteItems)}BulkDelete(){void 0!==typeof this.setBulkDeleteItems&&this.setBulkDeleteItems.length>0?confirm("Are you sure to delete ?")&&this.productsService.bulkDelete(this.setBulkDeleteItems).subscribe(o=>{console.log("response",o),document.getElementById("deleteAll").checked=!1,this._snackBar.open(o.message,"",{duration:2e3,verticalPosition:"top"}),this.getNextData()},o=>{console.log(o)}):this._snackBar.open("No product selected","",{duration:2e3,verticalPosition:"top"})}getData(){this.productsService.getProducts({params:this.tablePaging}).subscribe(o=>{this.loading=!1,this.products=o.Products,console.log("this.users",this.products),this.products.length=o.total,this.dataSource=new l.by(this.products),this.dataSource.paginator=this.Paginator})}getNextData(){this.loading=!0,this.userDataPromise&&this.userDataPromise.unsubscribe(),this.userDataPromise=this.productsService.getProducts({params:this.tablePaging}).subscribe(o=>{this.loading=!1,console.log(o.Products),this.products.length=this.tablePaging.previousSize,this.products.push(...o.Products),this.products.length=o.total,this.dataSource=new l.by(this.products),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.Paginator})}pageChanged(o){this.tablePaging.limit=o.pageSize,this.tablePaging.offset=o.pageIndex.toString(),this.tablePaging.previousSize=o.pageSize*o.pageIndex,this.getNextData()}applyProductFilter(o){console.log("this.tablePaging",this.tablePaging);var c=o.trim().toLowerCase();this.userDataPromise=this.productsService.filterProduct(c).subscribe(i=>{this.loading=!1,this.products=i.Products,console.log("this.Products",this.products),this.products.length=i.total,this.dataSource=new l.by(this.products),this.dataSource.paginator=this.Paginator})}deleteProduct(o){confirm("Are you sure to delete ?")&&(console.log(o),this.productsService.deleteProducts(o).subscribe(c=>{this.getData()}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(T.eN),t.Y36(P.s),t.Y36(v.FF),t.Y36(u.qu),t.Y36(h.ux),t.Y36(A.n))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products"]],viewQuery:function(o,c){if(1&o&&(t.Gf(y,5),t.Gf(d.YE,5),t.Gf(k,5)),2&o){let i;t.iGM(i=t.CRH())&&(c.content=i.first),t.iGM(i=t.CRH())&&(c.sort=i.first),t.iGM(i=t.CRH())&&(c.Paginator=i.first)}},decls:28,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0",2,"max-height","90vh","overflow-y","scroll"],[1,"flex-auto","p-6","sm:p-10"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],["routerLink","/add-product"],["mat-raised-button","","color","primary"],[1,"me-2"],[1,"row"],[1,"mat-elevation-z8","shadow-sm","p-3","w-100","bg-white"],[1,"d-flex","px-3","py-4"],[1,"col-6"],[2,"cursor","pointer",3,"click"],[1,"form-group","d-flex"],["mat-raised-button","","color","warn",1,"ms-auto","me-2",3,"click"],["type","text","placeholder","Search",1,"form-control","bg-light","sortInput","rounded-pill",2,"max-width","268px",3,"keyup"],["productInput",""],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["class","text-center",4,"ngIf"],["table",""],["aria-label","Select page",3,"pageIndex","pageSize","pageSizeOptions","page"],["Paginator",""],[1,"d-flex","justify-content-center"],[1,"progress-spinner"],[1,"text-center"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","image"],["matColumnDef","name"],["matColumnDef","productCode"],["matColumnDef","stock"],["matColumnDef","category"],["matColumnDef","subCategory"],["matColumnDef","brand"],["matColumnDef","price"],["matColumnDef","action"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[1,"form-group"],["type","checkbox","id","deleteAll","value","",1,"form-check-input",3,"click"],["mat-cell",""],[1,"form-check"],["type","checkbox","value","",1,"form-check-input","deleteChecks",3,"id","click"],["alt","",1,"w-100","py-2",2,"max-width","70px",3,"src"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],[2,"text-decoration","none",3,"routerLink"],["mat-icon-button",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,c){if(1&o){const i=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"a",5),t.TgZ(6,"button",6),t.TgZ(7,"mat-icon",7),t._uU(8,"add"),t.qZA(),t._uU(9," Add Products"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"div",9),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"mat-icon",12),t.NdJ("click",function(){return c.getNextData()}),t._uU(15,"autorenew"),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"div",13),t.TgZ(18,"button",14),t.NdJ("click",function(){return c.BulkDelete()}),t._uU(19,"Bulk Delete"),t.qZA(),t.TgZ(20,"input",15,16),t.NdJ("keyup",function(){t.CHM(i);const r=t.MAs(21);return c.applyProductFilter(r.value)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(22,D,2,0,"div",17),t.YNc(23,N,2,0,"div",18),t.YNc(24,W,33,3,"ng-template",null,19,t.W1O),t.TgZ(26,"mat-paginator",20,21),t.NdJ("page",function(r){return c.pageChanged(r)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const i=t.MAs(25);t.xp6(22),t.Q6J("ngIf",c.loading)("ngIfElse",i),t.xp6(1),t.Q6J("ngIf",0===c.dataSource.data.length),t.xp6(3),t.Q6J("pageIndex",0)("pageSize",c.tablePaging.limit)("pageSizeOptions",t.DdM(6,V))}},directives:[_.yS,f.lW,Z.Hw,g.O5,C.NW,x.$g,l.BZ,d.YE,l.w1,l.fO,l.Dz,l.as,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:[".ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545!important}.example-chip-list[_ngcontent-%COMP%]{width:100%}  .mat-simple-snackbar{justify-content:center!important}"]}),e})();var tt=s(171),et=s(8295),ot=s(9983),nt=s(8550),it=s(3771),ct=s(4466),st=s(611);let at=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,_.Bz.forChild([{path:"",component:K}]),ct.m,l.p0,f.ot,Z.Ps,C.TU,d.JX,u.u5,u.UX,tt.To,et.lN,ot.c,it.T,nt.xD,x.Cq,h.ZX,st.Hi]]}),e})()}}]);