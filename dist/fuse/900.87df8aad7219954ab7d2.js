"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[900],{1900:(V,p,n)=>{n.r(p),n.d(p,{SubCategoriesModule:()=>W});var m=n(8583),c=n(3679),d=n(1494),g=n(2789),e=n(7716),Z=n(1841),S=n(9517),x=n(2082),v=n(6618),C=n(7001),h=n(1095),b=n(6627),_=n(9692),f=n(4885);const T=["content"],y=["Paginator"];function A(o,a){1&o&&(e.TgZ(0,"div",22),e._UZ(1,"mat-spinner",23),e.qZA())}function k(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"th",36),e.TgZ(1,"input",37),e.NdJ("click",function(i){return e.CHM(t),e.oxw(2).checkAllDeleteItems(i)}),e.qZA(),e.qZA()}}function D(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",38),e.TgZ(1,"div",39),e.TgZ(2,"input",40),e.NdJ("click",function(){const i=e.CHM(t),r=i.$implicit,l=i.index;return e.oxw(2).getDeleteItems(r,l)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.s9C("id",t._id)}}function N(o,a){1&o&&(e.TgZ(0,"th",36),e._uU(1," Name"),e.qZA())}function q(o,a){if(1&o&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.subCategoryName)}}function I(o,a){1&o&&(e.TgZ(0,"th",36),e._uU(1," Description"),e.qZA())}function U(o,a){if(1&o&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.subCategoryDescription)}}function B(o,a){1&o&&(e.TgZ(0,"th",36),e._uU(1," Category"),e.qZA())}function F(o,a){if(1&o&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.category.categoryName)}}function J(o,a){1&o&&(e.TgZ(0,"th",41),e._uU(1," Action "),e.qZA())}function P(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",42),e.TgZ(1,"button",43),e.NdJ("click",function(){const i=e.CHM(t),r=i.$implicit,l=i.index;return e.oxw(2).openUpdateModal(r,l)}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA(),e.TgZ(4,"button",44),e.NdJ("click",function(){const i=e.CHM(t),r=i.$implicit,l=i.index;return e.oxw(2).deleteCategory(r,l)}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA()}}function Y(o,a){1&o&&e._UZ(0,"tr",45)}function M(o,a){1&o&&e._UZ(0,"tr",46)}function w(o,a){if(1&o&&(e.TgZ(0,"table",24),e.ynx(1,25),e.YNc(2,k,2,0,"th",26),e.YNc(3,D,3,1,"td",27),e.BQk(),e.ynx(4,28),e.YNc(5,N,2,0,"th",26),e.YNc(6,q,2,1,"td",27),e.BQk(),e.ynx(7,29),e.YNc(8,I,2,0,"th",26),e.YNc(9,U,2,1,"td",27),e.BQk(),e.ynx(10,30),e.YNc(11,B,2,0,"th",26),e.YNc(12,F,2,1,"td",27),e.BQk(),e.ynx(13,31),e.YNc(14,J,2,0,"th",32),e.YNc(15,P,7,0,"td",33),e.BQk(),e.YNc(16,Y,1,0,"tr",34),e.YNc(17,M,1,0,"tr",35),e.qZA()),2&o){const t=e.oxw();e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumnsOne),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsOne)}}function O(o,a){if(1&o&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.categoryName)}}function H(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",47),e.TgZ(1,"h4",48),e._uU(2),e.qZA(),e.TgZ(3,"button",49),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.TgZ(4,"span",50),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",51),e.TgZ(7,"form",52),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().postData()}),e.TgZ(8,"div",7),e.TgZ(9,"div",53),e.TgZ(10,"label",54),e._uU(11," Name"),e.qZA(),e._UZ(12,"input",55),e.qZA(),e.TgZ(13,"div",53),e.TgZ(14,"label",54),e._uU(15," Description"),e.qZA(),e._UZ(16,"input",56),e.qZA(),e.TgZ(17,"div",53),e.TgZ(18,"label",54),e._uU(19," Category"),e.qZA(),e.TgZ(20,"select",57),e.TgZ(21,"option",58),e._uU(22,"Select"),e.qZA(),e.YNc(23,O,2,2,"option",59),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",60),e.TgZ(25,"button",61),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",62),e.TgZ(28,"button",63),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Save click")}),e._uU(29,"Close"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("",t.seletedSubCategory?"Update":"Add"," Subcategory"),e.xp6(5),e.Q6J("formGroup",t.subCategoriesForm),e.xp6(16),e.Q6J("ngForOf",t.getCategoriesList),e.xp6(3),e.hij("",t.seletedSubCategory?"Update":"Add"," Subcategory")}}const Q=function(){return[5,10,20,30,50,100]};let z=(()=>{class o{constructor(t,s,i,r,l,u){this.http=t,this.modalService=s,this._formBuilder=i,this.categoriesService=r,this.subCategoriesService=l,this._snackBar=u,this.dataSource=new g.by,this.loading=!1,this.setBulkDeleteItems=[],this.tablePaging={offset:0,limit:5,previousSize:0},this.displayedColumnsOne=["check","name","description","category","action"]}ngOnInit(){this.subCategoriesForm=this._formBuilder.group({subCategoryName:["",[c.kI.required]],subCategoryDescription:["",[c.kI.required]],category:["",[c.kI.required]]}),this.getCategories(),this.getData()}ngAfterViewInit(){this.getData()}getCategories(){this.categoriesService.listCategories().subscribe(t=>{this.getCategoriesList=t.Categories},t=>{console.log(t)})}getData(){this.subCategoriesService.getSubCategories({params:this.tablePaging}).subscribe(t=>{this.loading=!1,this.subCategories=t.SubCategories,console.log("this.subCategories",this.subCategories),this.subCategories.length=t.total,this.dataSource=new g.by(this.subCategories),this.dataSource.paginator=this.Paginator})}getNextData(){this.loading=!0,this.userDataPromise&&this.userDataPromise.unsubscribe(),this.userDataPromise=this.subCategoriesService.getSubCategories({params:this.tablePaging}).subscribe(t=>{this.loading=!1,console.log(t.SubCategories),this.subCategories.length=this.tablePaging.previousSize,this.subCategories.push(...t.SubCategories),this.subCategories.length=t.total,this.dataSource=new g.by(this.subCategories),this.dataSource._updateChangeSubscription(),this.dataSource.paginator=this.Paginator})}pageChanged(t){this.tablePaging.limit=t.pageSize,this.tablePaging.offset=t.pageIndex.toString(),this.tablePaging.previousSize=t.pageSize*t.pageIndex,this.getNextData()}applyCategoryFilter(t){console.log("this.tablePaging",this.tablePaging);var s=t.trim().toLowerCase();this.userDataPromise=this.subCategoriesService.filterSubCategories(s).subscribe(i=>{this.loading=!1,this.subCategories=i.subCategories,console.log("this.Products",this.subCategories),this.subCategories.length=i.total,this.dataSource=new g.by(this.subCategories),this.dataSource.paginator=this.Paginator})}openModal(t=null){this.seletedSubCategory=t,this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title"}).result.then(s=>{},s=>{this.subCategoriesForm.reset()})}openUpdateModal(t){console.log(t),this.openModal(t._id),this.subCategoriesForm.patchValue(t),this.subCategoriesForm.patchValue({category:t.category._id})}postData(){if(this.subCategoriesForm.markAllAsTouched(),this.subCategoriesForm.invalid)return console.log("this.subCategoriesForm",this.subCategoriesForm.value),!1;this.seletedSubCategory?this.subCategoriesService.updateSubCategories(this.seletedSubCategory,this.subCategoriesForm.value).subscribe(t=>{this.modalService.dismissAll(),this.subCategoriesForm.reset(),console.log(this.subCategories.length),this.getNextData()},t=>{console.log(t)}):this.subCategoriesService.addSubCategories(this.subCategoriesForm.value).subscribe(t=>{console.log(t),this.modalService.dismissAll(),this.subCategoriesForm.reset(),console.log(this.subCategories.length),this.getNextData()},t=>{console.log(t)})}deleteCategory(t){confirm("Are you sure to delete ?")&&this.subCategoriesService.deleteSubCategories(t).subscribe(s=>{this.getNextData()})}checkAllDeleteItems(t){var s=document.getElementsByClassName("deleteChecks");if(t.target.checked)for(let i=0;i<s.length;i++){let r=s[i];r.checked=!0;let l=r.getAttribute("id");this.setBulkDeleteItems.push(l)}else for(let i=0;i<s.length;i++)s[i].checked=!1,this.setBulkDeleteItems=[]}getDeleteItems(t,s){document.getElementById("deleteAll").checked=!1;var l=document.getElementById(t._id).checked;console.log("index",this.setBulkDeleteItems),l?this.setBulkDeleteItems.push(t._id):this.setBulkDeleteItems.splice(s,1),console.log(this.setBulkDeleteItems)}BulkDelete(){void 0!==typeof this.setBulkDeleteItems&&this.setBulkDeleteItems.length>0?confirm("Are you sure to delete ?")&&this.subCategoriesService.bulkDelete(this.setBulkDeleteItems).subscribe(t=>{console.log("response",t),document.getElementById("deleteAll").checked=!1,this._snackBar.open(t.message,"",{duration:2e3,verticalPosition:"top"}),this.getNextData()},t=>{console.log(t)}):this._snackBar.open("No product selected","",{duration:2e3,verticalPosition:"top"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.eN),e.Y36(S.FF),e.Y36(c.qu),e.Y36(x.G),e.Y36(v.F),e.Y36(C.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sub-Categories"]],viewQuery:function(t,s){if(1&t&&(e.Gf(T,5),e.Gf(d.YE,5),e.Gf(y,5)),2&t){let i;e.iGM(i=e.CRH())&&(s.content=i.first),e.iGM(i=e.CRH())&&(s.sort=i.first),e.iGM(i=e.CRH())&&(s.Paginator=i.first)}},decls:28,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0",2,"max-height","90vh","overflow-y","scroll"],[1,"flex-auto","p-6","sm:p-10"],[1,"row","mb-3"],[1,"col-md-6"],[1,"col-md-6","text-end"],["mat-raised-button","","color","primary",3,"click"],[1,"me-2"],[1,"row"],[1,"mat-elevation-z8","shadow-sm","p-3","w-100","bg-white"],[1,"d-flex","px-3","py-4"],[1,"col-6"],[2,"cursor","pointer",3,"click"],[1,"form-group","d-flex"],["mat-raised-button","","color","warn",1,"ms-auto","me-2",3,"click"],["type","text","placeholder","Search",1,"form-control","bg-light","sortInput","rounded-pill",2,"max-width","268px",3,"keyup"],["categoryInput",""],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["table",""],["aria-label","Select page","showFirstLastButtons","",3,"pageIndex","pageSize","pageSizeOptions","page"],["Paginator",""],["class","bd-example-modal-lg"],["content",""],[1,"d-flex","justify-content-center"],[1,"progress-spinner"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","category"],["matColumnDef","action"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["type","checkbox","id","deleteAll","value","",1,"form-check-input",3,"click"],["mat-cell",""],[1,"form-check"],["type","checkbox","value","",1,"form-check-input","deleteChecks",3,"id","click"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"px-4",3,"formGroup","ngSubmit"],[1,"form-group","mb-3","col-12"],["for","",1,"mb-1"],["type","text","id","subCategoryName","name","subCategoryName","formControlName","subCategoryName","placeholder","John doe",1,"form-control"],["type","text","id","subCategoryDescription","name","subCategoryDescription","formControlName","subCategoryDescription","placeholder","John doe",1,"form-control"],["aria-label","Default select example","formControlName","category",1,"form-select"],["value","","selected","","hidden","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mb-3"],["type","submit",1,"btn","btn-primary"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"value"]],template:function(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return s.openModal()}),e.TgZ(6,"mat-icon",6),e._uU(7,"add"),e.qZA(),e._uU(8," Add Sub-category"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"mat-icon",11),e.NdJ("click",function(){return s.getNextData()}),e._uU(14,"autorenew"),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"div",12),e.TgZ(17,"button",13),e.NdJ("click",function(){return s.BulkDelete()}),e._uU(18,"Bulk Delete"),e.qZA(),e.TgZ(19,"input",14,15),e.NdJ("keyup",function(){e.CHM(i);const l=e.MAs(20);return s.applyCategoryFilter(l.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(21,A,2,0,"div",16),e.YNc(22,w,18,3,"ng-template",null,17,e.W1O),e.TgZ(24,"mat-paginator",18,19),e.NdJ("page",function(l){return s.pageChanged(l)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,H,30,4,"ng-template",20,21,e.W1O),e.qZA()}if(2&t){const i=e.MAs(23);e.xp6(21),e.Q6J("ngIf",s.loading)("ngIfElse",i),e.xp6(3),e.Q6J("pageIndex",0)("pageSize",s.tablePaging.limit)("pageSizeOptions",e.DdM(5,Q))}},directives:[h.lW,b.Hw,m.O5,_.NW,f.$g,g.BZ,d.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.ge,g.ev,g.XQ,g.Gk,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.EJ,c.YN,c.Kr,m.sg],styles:[".ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545!important}  .mat-simple-snackbar{justify-content:center!important}"]}),o})();var E=n(171),$=n(8295),G=n(9983),j=n(8550),R=n(3771),L=n(4466),X=n(3423);let W=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.ez,X.Bz.forChild([{path:"",component:z}]),L.m,g.p0,h.ot,b.Ps,_.TU,d.JX,c.u5,c.UX,E.To,$.lN,G.c,R.T,j.xD,f.Cq,C.ZX]]}),o})()}}]);